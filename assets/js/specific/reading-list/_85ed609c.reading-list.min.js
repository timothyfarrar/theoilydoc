PIXL8.readingListHandler=function(){function a(a,c,d){void 0===c&&(c=!1),void 0===d&&(d=function(){}),b&&!c||(b=!0,$.ajaxQueue(a.find(".js-load-article").attr("href"),{method:"post"}).done(function(c){$(".article-container").last().after(c),void 0!==window.addthis&&window.addthis.layers.refresh(),d(),a.data("has-loaded",!0),b=!1}))}var b=!1,c=$({});$.ajaxQueue=function(a){function b(b){d=$.ajax(a),d.done(e.resolve).fail(e.reject).then(b,b)}var d,e=$.Deferred(),f=e.promise();return c.queue(b),f.abort=function(g){if(d)return d.abort(g);var h=c.queue(),i=$.inArray(b,h);return i>-1&&h.splice(i,1),e.rejectWith(a.context||a,[f,g,""]),f},f},$.fn.isOnScreen=function(a){void 0===a&&(a=!1);var b=$(window),c={top:b.scrollTop(),left:b.scrollLeft()};c.right=c.left+b.width(),c.bottom=c.top+b.height(),a&&(c.bottom-=b.height()/3);var d=this.offset();return d.right=d.left+this.outerWidth(),d.bottom=d.top+this.outerHeight(),!(c.right<d.left||c.left>d.right||c.bottom<d.top||c.top+b.height()/2>d.bottom)},$(".js-load-article").click(function(b){function c(){$("html, body").animate({scrollTop:$("#"+d.data("article")).offset().top-50},"slow")}b.preventDefault();var d=$(this).closest("li");if($("#"+d.data("article")).length)c();else{var e=d.prevAll().andSelf();e.each(function(b){$("#"+$(this).data("article")).length||(e.length-1==b?a($(this),!0,c):a($(this),!0))})}}),$(window).scroll(function(){if(PIXL8.fn.viewport().width>PIXL8.mediaWidth.SM){var b=$(this).scrollTop(),c=$(".sidebar-content-sticky"),d=$(".sidebar.mod-sticky").prev(),e=$(".sidebar.mod-sticky").offset().top+50;b>=e?c.addClass("do-stick"):c.removeClass("do-stick");var f=d.outerHeight()+d.offset().top-(b+c.outerHeight());d.outerHeight()+d.offset().top<b+c.outerHeight()+50?c.css("top",f):c.css("top","")}$(".article-container").each(function(b){var c=$(this),d=$(".widget.mod-reading-list li[data-article='"+c.attr("id")+"']");if(c.isOnScreen(!0)){var e=($(window).scrollTop()-c.offset().top+$(window).height()/2)/c.outerHeight()*100;100>e&&(d.prevAll().addClass("has-read"),d.nextAll().removeClass("has-read is-reading"),d.removeClass("has-read").addClass("is-reading"),d.find(".reading-progress-bar").width(e+"%"),e>65&&d.next().length&&(d.next().data("has-loaded")||a(d.next())))}else $(".article-container").length-1==b&&d.prevAll(".has-read").length==d.prevAll().length&&d.addClass("has-read"),0!=b||d.siblings(".is-reading").length||d.siblings(".has-read").length||$(".widget.mod-reading-list li").removeClass("has-read is-reading")})}).on("load",function(){$(window).trigger("scroll")})},function(a){a(document).ready(function(){PIXL8.readingListHandler()})}(jQuery);
//# sourceMappingURL=_reading-list.min.map